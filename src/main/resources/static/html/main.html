<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/static/favicon.ico"  type="image/x-icon">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="/static/bootstrap/css/dashboard.css">
	<link rel="stylesheet" href="/static/bootstrap/css/bootstrap-datepicker.css">
	<link rel="stylesheet" href="/static/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/static/css/ax5/ax5grid.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5mask.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5modal.css" />
	<link rel="stylesheet" href="/static/css/ax5/ax5toast.css" />
	<link rel="stylesheet" href="/static/css/jstree/style.min.css" />
	<script src="/static/js/jquery-3.5.1.min.js"></script>
	<script src="/static/js/jquery.serializeObject.js"></script>
	<script src="/static/bootstrap/js/bootstrap.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap-datepicker.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap-datepicker.ko.min.js"></script>
	<script src="/static/js/ax5/ax5core.min.js"></script>
	<script src="/static/js/ax5/ax5grid.min.js"></script>
	<script src="/static/js/ax5/ax5mask.min.js"></script>
	<script src="/static/js/ax5/ax5modal.min.js"></script>
	<script src="/static/js/ax5/ax5toast.min.js"></script>
	<script src="/static/js/jstree/jstree.min.js"></script>
	<script src="/static/js/global.js"></script>
  </head>
  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/static/html/main.html" target="_blank">금문철강</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <!-- <li><a href="#">Dashboard</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Profile</a></li> -->
            <li><a href="/static/html/admin/admin.html">Admin</a></li>
          </ul>
<!--           <form class="navbar-form navbar-right"> -->
<!--             <input type="text" class="form-control" placeholder="Search..."> -->
<!--           </form> -->
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <!-- <li class="active"><a href="/static/html/admin/auth/auth.html" onclick="return false;">권한관리 <span class="sr-only">(current)</span></a></li>
            <li><a href="/static/html/admin/role/role.html" onclick="return false;">롤관리</a></li>-->
          </ul>
        </div>
        <!-- 메인Body 페이지 영역 -->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          
        </div>
      </div>
    </div>
  </body>
</html>
<script type="text/javascript">

	$(document).ready(function() {
		setMenuAuth();
	})
	
	// 권한에 따른 메뉴 보여주기
	function setMenuAuth() {
		var formData = {
				"authInfo" : jwt.authInfo
		}
		postAjax("/selectMenuAuth", formData, null, function(data){
			checkMenuAuth(data.accessList);
		});
	}
	
	function checkMenuAuth(accessList) {
		var html = "";
		var subHtml = "";
		var parentMenuId = "";
		$.each(accessList, function(idx, item){
			subHtml = "";
			if(item.upMenuId == 'MENU100'){
				if(item.menuType == "HTML" && item.useYn == 'Y') {
					html += '<li><a href="'+item.menuUrl+'" onclick="setMenuIdx(\''+item.menuUrl+'\'); return false;">'+item.menuNm+'</a></li>';
				}else if(item.menuType == "FOLDER" && item.useYn == 'Y') {
					html += '<li id="'+item.menuId+'"><a href="#" onclick="subShowHide(this);return false;">'+item.menuNm+'</a></li>';
					parentMenuId = item.menuId;
					var formData = {
							"authInfo" : jwt.authInfo,
							"upMenuId" : item.menuId
					}
					postAjax("/selectSubMenuAuth", formData, null, function(data){
						subHtml += "<ul class=\"nav nav-sidebar\" style=\"margin-left: 20px !important;\">";
						$.each(data.accessSubList, function(idx, item){
							if(item.menuType == "HTML") {
								subHtml += '<li><a href="'+item.menuUrl+'" onclick="setMenuIdx(\''+item.menuUrl+'\'); return false;">'+item.menuNm+'</a></li>';
							}
						});
						
						subHtml += '</ul>';
						$("#"+parentMenuId).append(subHtml);
					});
				}
			}
		});
		$('.nav-sidebar').html(html);
	}
	
	function subShowHide(data){
		if($(data).parent().find("ul").css("display") == 'none'){
			$(data).parent().find("ul").show();
		}else{
			$(data).parent().find("ul").hide();
		}
	}
	
	function setMenuIdx(url) {
		$.get(url, function(data) {    	        
    		$(".main").html(data);
      	});
		setCookie("menuIdx", url, 1);
	}
	
</script>