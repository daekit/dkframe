<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="icon" href="/static/favicon.ico"  type="image/x-icon">
</head>
<script type="text/javascript">
	
	var firstGrid = new ax5.ui.grid();
	var authId = null;
	var authRole = null;
	
	$(document).ready(function() {
		
        firstGrid.setConfig({
        	showRowSelector: true,
        	multipleSelect: false,
            target: $('[data-ax5grid="first-grid"]'),
            columns: [
                {key: "authId", label: "재고탭 표시"},
                {key: "authNm", label: "코드"},
                {key: "description", label: "대분류"},
                {key: "createDt", label: "중분류"},
                {key: "createDt", label: "품명"},
                {key: "createDt", label: "실품명"},
                {key: "createDt", label: "슬리팅명"},
                {key: "createDt", label: "Sheet명"},
                {key: "createDt", label: "기본길이"},
                {key: "createDt", label: "수량단위"},
                {key: "createId", label: "단가단위"}
            ]
        });
        
        getData();
	})
	
	function getData() {
		postAjax("/admin/itm/selectItmList", null, null, function(data){
			firstGrid.setData(data.itmList);
		});
	}
	
	function createItmModal() {
		openModal("/static/html/admin/itm/createItm.html", 800, 400, "품명코드등록");
	}
	

	function updateItmModal() {
		if(selectGridValidation(firstGrid)) return;
		openModal("/static/html/admin/itm/updateItm.html", 800, 400, "품명코드수정");
	}
	
	function deleteItm() {
		if(selectGridValidation(firstGrid)) return;
		if(!confirm("삭제하시겠습니까?")) return;
		var formData = {
				"authId" : firstGrid.getList("selected")[0].authId
		}
		deleteAjax("/admin/itm/deleteItm", formData, null, function(data){
			if(data.resultCode == 200){
				alert(data.resultMessage);
				getData();
			}
		});
	}
	
	function goSubCate(mainIdVal, targetId, targetSelected){
		if($("#"+targetId).html() !== ""){
			$("#"+targetId).html("");
			$("#"+targetId).html("<option value='' selected>--선택--</option>");
		}
		selectCodeInfo(mainIdVal, targetId, targetSelected)
	}

	function selectCodeInfo(codeKind, targetId, targetSelected){
		postAjax("/admin/code/selectCodeInfo", {"codeKind" : codeKind}, null, function(data){
			var codeListInfo = data.codeList;
			var codeListHtml = "";
			for(var i=0; i<codeListInfo.length; i++){
				if(codeListInfo[i].codeId == targetSelected){
					codeListHtml += "<option value="+codeListInfo[i].codeId+" selected>"+codeListInfo[i].codeNm+"</option>";
				}else{
					codeListHtml += "<option value="+codeListInfo[i].codeId+">"+codeListInfo[i].codeNm+"</option>";
				}
			}
			$("#"+targetId).append(codeListHtml);
		});
	}
	
</script>
<body>
	<div class="row">
		<span style="font-size: 25px; font-weight: bold;">품명코드관리</span>
		<div style="float: right;">
			<a id="loginBtn" class="btn btn-default btn-sm" onclick="createItmModal();">등록</a>
			<a id="loginBtn" class="btn btn-default btn-sm" onclick="updateItmModal();">수정</a>
			<a id="loginBtn" class="btn btn-default btn-sm" onclick="deleteItm();">삭제</a>
		</div>
	</div>
	<div class="row">
		<div data-ax5grid="first-grid" data-ax5grid-config="{}" style="height: 500px; width: 100%"></div>
	</div>
</body>
</html>
