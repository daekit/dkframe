<body>
    <!-- modalpopup  -->
    <!-- modalpopup_area + open 클래스 추가시 오픈 -->
    <div class="">
        
        <!-- <div class="modalpopup" style="width: 600px;"> -->
            <!-- <div class="tit_contents">
                <h4 class="tit">검색</h4>

                <div class="fr">
                    <a href="#" class="btn-layerClose">Close</a>
                </div>
            </div> -->
            <div class="pop_contents">                   
              <!-- <div class="pop_btn tr">
                <a class="bg_gl fs-13">초기화</a>
              </div>   -->
              <!-- 테이블 -->
              <div class="popup_table">
                <!-- 테이블 선제거시 사용 <table class="border_none"> -->
                <table>
                  <colgroup>
                    <col width="">
                    <col width="">
                    <col width="80px">
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>
                      <select id="clntDtlSelectValue" class="form-control" onchange="commonCodeList();"></select>
                      </td>
                      <td><input id="clntDtlSearchName" type="text" class="form-control" onkeypress="if(event.keyCode == 13){search();}"></td>
                      <td colspan="" onclick="serchVal();"><button>검색</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row">
				<div data-ax5grid="clntSearch-grid" data-ax5grid-config="{}" style="height: 100px; width: 100%"></div>
			  </div>

            </div>

            <div>
              <button type="button" class="btn btn-default btn-sm" onclick="nameOnClick();">확인</button>
              <button type="button" class="btn btn-default btn-sm" onclick="secondModal.close();">닫기</button>
            </div>
        </div>
    <!-- </div> -->
    <!--// modalpopup  -->
</body>
<script type="text/javascript">
	var authId = null;
	var authRole = null;
	var actionType = null;
	var clntSearchGrid = new ax5.ui.grid();
	
	$(document).ready(function() {
		clntDtlSearchCombo.initCombo();
		clntSearchGrid.setConfig({
	    	showRowSelector: true,
	    	multipleSelect: false,
	        target: $('[data-ax5grid="clntSearch-grid"]'),
	        header: {
	        	 selector: false
	        },
	        body: {
	        	 onClick: function () {
	                this.self.select(this.dindex);
	            },
	            onDBLClick: function () {
	            	
	            }, 
	        },
	        
	        columns: [
	            {key: "clntCd", label: "거래처코드"},
	            {key: "clntNm", label: "거래처명"}
	        ]
	    });
		serchVal(0);
		
	});
	
	function serchVal(_pageNo){
		var targetObj = this.target;
		var paramObj = {};
		paramObj.searchValue = $('#clntDtlSelectValue').val();
		paramObj.searchType = $('#clntDtlSelectName').val();
		postAjax("/user/sd/sd05/selectProjectClntList", paramObj, null, function (data){
			var list = data.sd0501p03;
			clntSearchGrid.setData({
				list : list,
				page : {
					//currentPage : _pageNo
					
				}
			});
		})
	}
	
	
	var clntDtlSearchCombo = {
		initCombo: function(param){
			var formData = {"clntCD": "ACCOUNT"};
			postAjax("/user/sd/sd05/selectProjectClntList", formData, null, function (data){
				var list = data.sd0501p03; 
				var optionHtml = '<option value="">전체</option>';
				for (var i = 0; i < list.length; i++) {
							optionHtml += '<option value=\"' +  list[i].clntCd + '\">'
							+ list[i].clntNm + '</option>';
				}
				document.getElementById("clntDtlSelectValue").innerHTML = optionHtml;
			})
		}
	} 
	
	/* function commonCodeList(param){
		debugger;
		var codeSelect = document.getElementById("coCd");
		var codeId = codeSelect.options[codeSelect.selectedIndex].value;
	} */
	
	function nameOnClick(){
		if (selectGridValidation(clntSearchGrid)) return;
		var row = clntSearchGrid.getList("selected")[0];
		clntCd = row.clntCd;
		clntNm = row.clntNm;
		var formData = {
			"clntCd" : clntCd,
			"clntNm" : clntNm
		};
		setDtlclntCd(formData);
		secondModal.close();
	}
	
	
</script>
</html>