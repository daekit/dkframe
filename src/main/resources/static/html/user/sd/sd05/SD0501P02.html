<body>
    <!-- modalpopup  -->
    <!-- modalpopup_area + open 클래스 추가시 오픈 -->
    <div class="">
        
        <!-- <div class="modalpopup" style="width: 600px;"> -->
            <!-- <div class="tit_contents">
                <h4 class="tit">검색</h4>

                <div class="fr">
                    <a href="#" class="btn-layerClose">Close</a>
                </div>
            </div> -->
            <div class="pop_contents">                   
              <!-- <div class="pop_btn tr">
                <a class="bg_gl fs-13">초기화</a>
              </div>   -->
              <!-- 테이블 -->
              <div class="popup_table">
                <!-- 테이블 선제거시 사용 <table class="border_none"> -->
                <table>
                  <colgroup>
                    <col width="">
                    <col width="">
                    <col width="80px">
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>
                      <select id="coCdDtlSelectSearch" class="form-control" onchange="commonCodeList();">
                      </select>
                      </td>
                      <td><input id="userDtlSearch" type="text" class="form-control" onkeypress="if(event.keyCode == 13){search();}"></td>
                      <td colspan="" onclick="serchVal();"><button>검색</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row">
				<div data-ax5grid="search-grid" data-ax5grid-config="{}" style="height: 100px; width: 100%"></div>
			  </div>

            </div>

            <div>
              <button type="button" class="btn btn-default btn-sm" onclick="nameOnClick();">확인</button>
              <button type="button" class="btn btn-default btn-sm" onclick="secondModal.close();">닫기</button>
            </div>
        </div>
    <!-- </div> -->
    <!--// modalpopup  -->
</body>
<script type="text/javascript">
	var authId = null;
	var authRole = null;
	var actionType = null;
	var flg = "Y";
	var searchGrid = new ax5.ui.grid();
	
	$(document).ready(function() {
		
		coCdDtlSearchCombo.initCombo();
		searchGrid.setConfig({
	    	showRowSelector: true,
	    	multipleSelect: false,
	        target: $('[data-ax5grid="search-grid"]'),
	        header: {
	        	 selector: false
	        },
	        body: {
	        	 onClick: function () {
	                this.self.select(this.dindex);
	            },
	            onDBLClick: function () {
	            	
	            }, 
	        },
	        /* page: {
	            navigationItemCount: 9,
	            height: 30,
	            display: true,
	            firstIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
	            prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
	            nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
	            lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
	            onChange: function () {
	            	gridView.setData(this.page.selectPage);
	            }
	        }, */
	        columns: [
	            {key: "coCd", label: "회사"},
	            {key: "name", label: "담당자"},
	        ]
	    });
		serchVal(0);
		
	});
	
	function serchVal(_pageNo){
		var targetObj = this.target;
		var paramObj = {};
		
		var row = firstGrid.getList("selected")[0];
		
		if(flg == "Y"){
			code = $("#coCdDtl option:selected").val();
			$("#coCdDtlSelectSearch").val(code);
			mngIdDtl = $("#mngIdDtl").val();
			$("#userDtlSearch").val(mngIdDtl);
			//$("#userDtlSearch").val();
			flg = "N";
		}
		/* var selectSelpchCd = document.getElementById("coCdDtl");
		document.getElementById("coCdDtlSelectSearch").innerHTML = selectSelpchCd.innerHTML; */
		
		paramObj.searchType = $('#coCdDtlSelectSearch').val();
		paramObj.searchValue = $('#userDtlSearch').val();
		postAjax("/user/sd/sd05/selectProjectNameList", paramObj, null, function (data){
			var list = data.codeName;
			searchGrid.setData({
				list : list,
				page : {
					//currentPage : _pageNo
					
				}
			});
		})
	}
	
	
	var coCdDtlSearchCombo = {
		initCombo: function(param){
			
			var selectSelpchCd = document.getElementById("coCdDtl");
			document.getElementById("coCdDtlSelectSearch").innerHTML = selectSelpchCd.innerHTML;
			/* var row = firstGrid.getList("selected")[0];
			var formObj = {"prjctCd": row.prjctCd, "userId": jwt.userId};
			postAjax("/user/sd/sd05/selectProjectKeyList", formObj, null, function (data){
				setUserDetailInfo(data.codeName);
			}) */
			
			/* var formData = {"dtptId": "ACCOUNT"};
			postAjax("/user/sd/sd05/selectProjectcoCdList", formData, null, function (data){
				var list = data.codecoCd; 
				var optionHtml = '<option value="">전체</option>';
				for (var i = 0; i < list.length; i++) {
							optionHtml += '<option value=\"' +  list[i].deptId + '\">'
							+ list[i].deptNm + '</option>';
				}
				document.getElementById("coCdDtlSelectSearch").innerHTML = optionHtml;
			}) */
		}
	} 
	
	function setUserDetailInfo(data){
		$.each(data, function(key, value){
			if(key == 'coCd'){
				$("#coCdDtlSelectSearch").val(value).attr("selected", "selected");
			}
		});
	} 
	
	function commonCodeList(param){
		var codeSelect = document.getElementById("coCd");
		var codeId = codeSelect.options[codeSelect.selectedIndex].value;
		
		
	}
	
	function nameOnClick(){
		if (selectGridValidation(searchGrid)) return;
		var row = searchGrid.getList("selected")[0];
		coCd = row.coCd;
		name = row.name;
		var formData = {
			"coCd" : coCd,
			"name" : name
		};
		setDtlcoCd(formData);
		secondModal.close();
	}
	
	
</script>
</html>