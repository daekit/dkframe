<body>
    <!-- modalpopup  -->
    <!-- modalpopup_area + open 클래스 추가시 오픈 -->
    <div class="">
        
        <!-- <div class="modalpopup" style="width: 600px;"> -->
            <!-- <div class="tit_contents">
                <h4 class="tit">검색</h4>

                <div class="fr">
                    <a href="#" class="btn-layerClose">Close</a>
                </div>
            </div> -->
            <div class="pop_contents">                   
              <!-- <div class="pop_btn tr">
                <a class="bg_gl fs-13">초기화</a>
              </div>   -->
              <!-- 테이블 -->
              <div class="popup_table">
                <!-- 테이블 선제거시 사용 <table class="border_none"> -->
                <table>
                  <colgroup>
                    <col width="">
                    <col width="">
                    <col width="80px">
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>
                      <select id="prdtDtlSelectValue" class="form-control" onchange="commonCodeList();"></select>
                      </td>
                      <td><input id="prdtDtlSelectName" type="text" class="form-control" onkeypress="if(event.keyCode == 13){search();}"></td>
                      <td colspan="" onclick="gridView2.setData(0);"><button>검색</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row">
				<div data-ax5grid="prdtSearch-grid" data-ax5grid-config="{}" style="height: 100px; width: 100%"></div>
			  </div>

            </div>

            <div>
              <button type="button" class="btn btn-default btn-sm" onclick="nameOnClick();">확인</button>
              <button type="button" class="btn btn-default btn-sm" onclick="secondModal.close();">닫기</button>
            </div>
        </div>
    <!-- </div> -->
    <!--// modalpopup  -->
</body>
<script type="text/javascript">
	var authId = null;
	var authRole = null;
	var actionType = null;
	var prdtSearchGrid = null;
	
	var gridView2 = {
		initView: function(){
			this.target = new ax5.ui.grid();
			this.target.setConfig({
		    	showRowSelector: true,
		    	multipleSelect: false,
		    	target: $('[data-ax5grid="prdtSearch-grid"]'),
		        header: {
		        	align: "center", 
		        	selector: false
		        },
		        body: {
		        	 onClick: function () {
		                this.self.select(this.dindex);
		            },
		            onDBLClick: function () {
		            	
		            }, 
		        },
		        page: {
		            navigationItemCount: 9,
		            height: 30,
		            display: true,
		            searchIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
		            prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
		            nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
		            lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
		            onChange: function () {
		            	gridView2.setData(this.page.selectPage);
		            }
		        },
		        columns: [
		            {key: "prdtCd", label: "제품코드"},
		            {key: "prdtNm", label: "제품 명"}
		        ]
		    });
			return this;
		},
		setData: function(_pageNo) {
			prdtSearchGrid = this.target;
			var paramObj = {};
			paramObj.searchValue = $('#prdtDtlSelectValue').val();
			paramObj.searchType = $('#prdtDtlSelectName').val();
			
			var formData = {
				"prdtCd"   : $("#prdtDtlSelectValue").val(),
				"prdtNm"   : $("#prdtDtlSelectName").val(),
				"pageNo" : _pageNo + 1
			} 
			
			postAjax("/user/sm/sm02/selectPrdtSearchList", formData, null, function(data){
				var list = data.spslList;
				var optionHtml = '<option value="">전체</option>';
				for (var i = 0; i < list.length; i++) {
					optionHtml += '<option value=\"' +  list[i].prdtCd + '\">'
					+ list[i].prdtCd + '</option>';
					}
				document.getElementById("prdtDtlSelectValue").innerHTML = optionHtml;
				prdtSearchGrid.setData({
					list : list,
					page : {
						/* currentPage : _pageNo,
						pageSize : data.paginationInfo.pageSize,
						totalElements : data.paginationInfo.totalRecordCount,
						totalPages : data.paginationInfo.totalPageCount */
					}
				});
			}); 
		} 
	}
	
	//화면로드시
	$(document).ready(function() {
	    
	    gridView2.initView().setData(0);
	})
	
	/* function commonCodeList(param){
		var codeSelect = document.getElementById("coCd");
		var codeId = codeSelect.options[codeSelect.selectedIndex].value;
	} */
	
	function nameOnClick(){
		//var idx = prdtSearchGrid.selectedDataIndexs;
		if (selectGridValidation(prdtSearchGrid)) return;
		var row = prdtSearchGrid.getList("selected")[0];
		prdtCd = row.prdtCd;
		prdtNm = row.prdtNm;
		var formData = {
			"prdtCd" : prdtCd,
			"prdtNm" : prdtNm
		};
		setDtlPrdtCd(formData);
		secondModal.close();
	}
	
	
	
</script>
</html>