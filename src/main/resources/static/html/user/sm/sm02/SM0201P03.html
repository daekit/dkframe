<body>
    <!-- modalpopup  -->
    <!-- modalpopup_area + open 클래스 추가시 오픈 -->
    <div class="">
        
        <!-- <div class="modalpopup" style="width: 600px;"> -->
            <!-- <div class="tit_contents">
                <h4 class="tit">검색</h4>

                <div class="fr">
                    <a href="#" class="btn-layerClose">Close</a>
                </div>
            </div> -->
            <div class="pop_contents">                   
              <!-- <div class="pop_btn tr">
                <a class="bg_gl fs-13">초기화</a>
              </div>   -->
              <!-- 테이블 -->
              <div class="popup_table">
                <!-- 테이블 선제거시 사용 <table class="border_none"> -->
                <table>
                  <colgroup>
                    <col width="">
                    <col width="">
                    <col width="80px">
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>
                      <select id="clntDtlSelectValue" class="form-control" onchange="commonCodeList();"></select>
                      </td>
                      <td><input id="clntDtlSelectName" type="text" class="form-control" onkeypress="if(event.keyCode == 13){search();}"></td>
                      <td colspan="" onclick="gridView3.setData(0);"><button>검색</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="row">
				<div data-ax5grid="clntSearch-grid" data-ax5grid-config="{}" style="height: 300px; width: 100%"></div>
			  </div>

            </div>

            <div>
              <button type="button" class="btn btn-default btn-sm" onclick="nameOnClick();">확인</button>
              <button type="button" class="btn btn-default btn-sm" onclick="secondModal.close();">닫기</button>
            </div>
        </div>
    <!-- </div> -->
    <!--// modalpopup  -->
</body>
<script type="text/javascript">
	var authId = null;
	var authRole = null;
	var actionType = null;
	var clntSearchGrid = null;
	
	var gridView3 = {
		initView: function(){
			this.target = new ax5.ui.grid();
			this.target.setConfig({
		    	showRowSelector: true,
		    	multipleSelect: false,
		    	target: $('[data-ax5grid="clntSearch-grid"]'),
		        header: {
		        	align: "center", 
		        	selector: false
		        },
		        body: {
		        	 onClick: function () {
		                this.self.select(this.dindex);
		            },
		            onDBLClick: function () {
		            	
		            }, 
		        },
		        page: {
		            navigationItemCount: 9,
		            height: 30,
		            display: true,
		            searchIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
		            prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
		            nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
		            lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
		            onChange: function () {
		            	gridView3.setData(this.page.selectPage);
		            }
		        },
		        columns: [
		            {key: "clntCd", label: "거래처코드", width: "40%"},
		            {key: "clntNm", label: "거래처명", width: "60%"}
		        ]
		    });
			return this;
		},
		setData: function(_pageNo) {
			clntSearchGrid = this.target;
			var paramObj = {};
			paramObj.searchValue = $('#clntDtlSelectValue').val();
			paramObj.searchType = $('#clntDtlSelectName').val();
			
			var formData = {
				"clntCd"   : $("#clntDtlSelectValue").val(),
				"clntNm"   : $("#clntDtlSelectName").val(),
				"pageNo" : _pageNo + 1
			} 
			
			postAjax("/user/sm/sm02/selectClntSearchList", formData, null, function(data){
				var list = data.scslList;
				var optionHtml = '<option value="">전체</option>';
				for (var i = 0; i < list.length; i++) {
					optionHtml += '<option value=\"' +  list[i].clntCd + '\">'
					+ list[i].clntCd + '</option>';
					}
				document.getElementById("clntDtlSelectValue").innerHTML = optionHtml;
				clntSearchGrid.setData({
					list : list,
					page : {
						/* currentPage : _pageNo,
						pageSize : data.paginationInfo.pageSize,
						totalElements : data.paginationInfo.totalRecordCount,
						totalPages : data.paginationInfo.totalPageCount */
					}
				});
			}); 
		} 
	}
	
	//화면로드시
	$(document).ready(function() {
	    
	    gridView3.initView().setData(0);
	})

	function nameOnClick(){
		//var idx = clntSearchGrid.selectedDataIndexs;
		if (selectGridValidation(clntSearchGrid)) return;
		var row = clntSearchGrid.getList("selected")[0];
		clntCd = row.clntCd;
		clntNm = row.clntNm;
		var formData = {
			"clntCd" : clntCd,
			"clntNm" : clntNm
		};
		setDtlClntCd(formData);
		secondModal.close();
	}
	
	
	
</script>
</html>