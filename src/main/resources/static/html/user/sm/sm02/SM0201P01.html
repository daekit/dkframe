<body>
	<div id="arViewDiv" class="container-fluid">
      <div class="row">
        <div class="popup_area">
		        <div  class="popup_table">
		          <div class="contents no_bg">
				    <ul class="btn_ul">
				      <li class="btn_r">
				        <a onclick = "gridView1.setData(0);">
				          <button class="bg_gray">검 색</button>
				        </a>
				        <a onclick = "searchInit()">
				          	<button class="bg_gray">초기화</button>
				        </a>
				      </li>
				    </ul>
			      </div>
		          <table>
		          	<tbody>
		          		<tr>
		          			<th colspan= "2">출고 회사</th>
		          			<td colspan="3"> 
		          				<select id="searchDtlOutCoCd" name="searchDtlOutCoCd" data-kind="CO" onchange="setByCoCd(this.value); gridView1.setData(0);" required >
<!-- 		          				<option value="">전체</option> -->
		          				</select>
		          			</td>
		          			<th colspan="2">출고지(창고)</th>
		          			<td colspan="3"> 
		          				<select id="searchDtlOutWhCd" name="searchDtlOutWhCd" data-kind="WH" onchange="gridView1.setData(0);" required>
		          				<option value="">전체</option>
		          				</select>
		          			</td>
		          			<th colspan= "2">재고주체</th>
			                <td class="drctArea" colspan="3">
			                	<input type="hidden" id="searchDtlClntCd" name="searchDtlClntNm" style="width: 76%;">                   
			                	<div class="search_form">
				                    <input type="text" id="searchDtlClntNm" name="searchDtlClntNm" readonly="readonly">
			                    	<a onclick="clntSearch();"><i class="i_search_w"></i></a>
			                    </div>
			                </td>
		          			<th colspan="2">재고주체</th>
		          			<td colspan="3"> 
		          				<select id="searchDtlOwnerCd" data-kind="OWNER" onchange="gridView1.setData(0);" required>
		          				<option value="">전체</option>
		          				</select>
		          			</td>
		          		</tr>
		          		<tr name="tableCd">
		          			<th colspan="2">판매유형</th>
		          			<td colspan="3"> 
		          				<select id="searchDtlTypCd" data-kind="SELLTYPE" onchange="gridView1.setData(0);" required>
		          				<option value="">전체</option>
		          				</select>
		          			</td>
		          			<th colspan= "2">프로젝트</th>
		          			<td colspan="3"> 
			                    <div class="search_form" >
					              <input type="hidden" id="prjctCd_S">
					              <input type="text" id="prjctNm_S" onkeyup="event.keyCode == 8 ? prjctCd_S.value = '' : event.keyCode == 13 ? gridView1.setData(0) : ''">
					              <a onclick="openSecondPrjctSearch('S');"><i class="i_search_w"></i></a>
					            </div>
			                </td>
		          			<th colspan="2">수입구분</th>
		          			<td colspan="3"> 
		          				<select id="searchDtlImpYn" data-kind="YN" onchange="gridView1.setData(0);" required>
		          				<option value="">전체</option>
		          				</select>
		          			</td>
			          		<th colspan= "2">제품</th>
			                <td class="drctArea" colspan="3">
			                	<input type="hidden" id="searchDtlPrdtCd" name="searchDtlPrdtCd" style="width: 76%;">                   
			                	<div class="search_form">
				                    <input type="text" id="searchDtlPrdtNm" name="searchDtlPrdtNm" readonly="readonly">
			                    	<a onclick="prdtSearch(this);"><i class="i_search_w"></i></a>
			                    </div>
			                </td>	
		          		</tr>
		          	</tbody>
		          </table>
	          </div>
	        <div class="contents">
			  <div data-ax5grid="search-grid" data-ax5grid-config="{}" style="height: 400px; width: 100%"></div>
		    </div>
        </div>
      </div>
      <div class="popup_area" style="min-height: 120px;">
      <div class="popup_table">
      	<div class="contents no_bg">
	      <ul class="btn_ul">
	        <li class="btn_r">
	          <a id="move">
	            <button class="bg_gray" onclick = "insertUpdateMove('C')" authchk>이동</button>
	            <!-- <button class="bg_gray" onclick = "insertTransAmt('C')" authchk>운반비</button>
	            <button class="bg_gray" onclick = "insertUpdateMove('C')" authchk>이동</button> -->
	          </a>
	        </li>
	      </ul>
		 </div>
      	<div class="contents">
          <table>
          	<tbody>
          	  <tr>
          		<th colspan="2" class="hit">입고지</th>
          		<td colspan="2"> 
			              <input type="hidden" id="sCoCd"     name="sCoCd" >
			              <input type="hidden" id="sPrdtCd"   name="sPrdtCd" >
			              <input type="hidden" id="sPrdtLen"  name="sPrdtLen" >
			              <input type="hidden" id="sPrdtSpec" name="sPrdtSpec" >
			              <input type="hidden" id="sPrdtSize" name="sPrdtSize" >
			              <input type="hidden" id="sWhType"   name="sWhType">
			              <input type="hidden" id="transSeq"  name="transSeq">
			              <input type="hidden" id="transAmt"  name="transAmt">
					 	  <input type="hidden" id="clntCd"    name="clntCd">
					   	  <input type="hidden" id="clntNm"    name="clntNm">
          		  <select id="searchDtlWhCd" name="searchDtlWhCd" data-kind="WH" onChange="findWhType()" required msg="입고지"></select>
          		</td> 
          		<th colspan="2" class="hit">판매유형</th>
          		<td colspan="2"> 
          		  <select id="searchDtlType" data-kind="SELLTYPE" required msg="판매유형"></select>
          		</td>
          		<th colspan="2" class="hit">실물이동여부</th>
          		<td colspan="2"> 
          		  <select id="realStockYn" data-kind="YN" required msg="실물이동여부" title="실물이동일 경우 YES를 선택하세요. MES에 실물 반영됩니다."></select>
          		</td>
          		<th colspan="2" class="hit">오류수정여부</th>
          		<td colspan="2"> 
          		  <select id="errCorecYn"  required msg="오류수정여부" title="오류수정일 경우  MES에 반영 안됩니다.">
		          				<option value="Y" selected="selected">오류수정(MES반영안됨)</option>
		          				<option value="N">정상이동(MES반영)</option>
		          </select>				
          		</td>
          	  </tr>
           	  <tr>
			    <th colspan= "2" class="hit">이동일자</th>
      		    <td colspan="2"> 
      			  <input type="text" id="sTransDt" name="sTransDt" class="input_calendar" required msg="이동일자">
      		    </td>
			    <th colspan= "2">프로젝트</th>
                <td colspan="2"> 
                    <div class="search_form">
		              <input type="hidden" id="searchPrjctCd" value="0">
		              <input type="text" id="searchPrjctNm" onkeyup="event.keyCode == 13 ? openSecondPrjctSearch('E') : ''"  readonly="readonly">
		              <a onclick="openSecondPrjctSearch('E');"><i class="i_search_w"></i></a>
		            </div>
                </td>
      		      <th colspan="2" class="hit">수입구분</th>
      		      <td colspan="2">
      		      	<select id="impYn" name="impYn" data-kind="YN" required>
       				</select>
      		      </td>
          	  </tr>
          	  <tr>
          	   <th colspan= "2" class="hit">메모</th>
      			  <td colspan="6"> 
      			    <input id="searchRmk" required msg="메모">
      		      </td>
          	  </tr>         	  
          	</tbody>
          </table>      		
      	</div>
      </div>
      </div>
    </div>
    <a id="closeBtn" >
    	<button class="bg_gray" onclick="modalStack.close();">닫기</button>
    </a>
    <form id="popForm">
		<input type="hidden" id="userId" name="userId">
	    <input type="hidden" id="pgmId"  name="pgmId" value="SM0201P01">
	</form>
</body>

<link rel="stylesheet" href="/static/css/jstree/style.min.css" />
<script src="/static/js/jstree/jstree.min.js"></script>
<script type="text/javascript">
	var authId = null;
	var authRole = null;
	var actionType = null;
	var searchGrid = null;
	var insertOK = false;
	var moveWtAll = 0;
	
	var gridView1 = {
		initView: function(){
			this.target = new ax5.ui.grid();
			this.target.setConfig({
				showRowSelector: false,
		    	multipleSelect: false,
		    	sortable: true,
		    	target: $('[data-ax5grid="search-grid"]'),
		        header: {
		        	align: "center", 
		        	selector: false
		        },
		        body: {
		        	onClick: function () {
		        		var idx = this.self.select(this.dindex);
		        		var prjctCdIdx = idx.list[this.dindex].prjctCd;
		                $("#prjctCd").val(prjctCdIdx);
		                
		                
		            },
		            onDBLClick: function () {
						clickChkBox();
		            	//updateProjectModal("U");
		            }, 
		            onDataChanged: function() {
		        		var idx = this.self.select(this.dindex);
		        		var moveQty = idx.list[this.dindex].moveQty;
		        		var prdtLenEdit = idx.list[this.dindex].prdtLenEdit;
		        		//debugger;
		        		
		        		//num check
		        		if((moveQty != undefined && isNaN(moveQty)) || moveQty == ''){
		        			idx.list[this.dindex].moveQty = '';
		        			idx.list[this.dindex].moveWt = '';
		        			this.self.repaint();
		        			return;
		        		}
		        		if(prdtLenEdit != undefined && isNaN(prdtLenEdit)){
		        			idx.list[this.dindex].prdtLenEdit = '';
		        			this.self.repaint();
		        			return;
		        		}
		        		
		        		if(moveQty != undefined){
			        		idx.list[this.dindex].moveWt = idx.list[this.dindex].moveQty * idx.list[this.dindex].prdtCnvrsnWt
			            	this.self.repaint();
		        		}
		        		clickChkBox();
		            }
		        },
		        page: {
		            navigationItemCount: 9,
		            height: 30,
		            display: true,
		            searchIcon: '<i class="fa fa-step-backward" aria-hidden="true"></i>',
		            prevIcon: '<i class="fa fa-caret-left" aria-hidden="true"></i>',
		            nextIcon: '<i class="fa fa-caret-right" aria-hidden="true"></i>',
		            lastIcon: '<i class="fa fa-step-forward" aria-hidden="true"></i>',
		            onChange: function () {
		            	gridView1.setData(this.page.selectPage);
		            }
		        },
		        columns: [
		        	{key: "stokSeq",        label: "시퀀스",		 align : "center", width : 100, hidden:"true"},
		            {key: "coNm",           label: "출고회사",		 align : "center", width : 100, hidden:"true"},
		            {key: "whNm",           label: "출고지"  ,	 align : "center", width : 90},
		            {key: "ownerNm",        label: "주체",		 align : "center", width : 50},
		            {key: "typNm",          label: "유형",         align : "center", width : 50},
		            {key: "prjctNm",        label: "프로젝트",	      align : "left",   width : 100},
		            {key: "clntNm",         label: "거래처",		  align : "left",   width : 100},
		            {key: "prdtNm",         label: "제품",		   align : "left",   width : 130},
		          	{key: "prdtSpec",       label: "스펙",    	   align : "left",   width: 70},
		          	{key: "prdtSize",       label: "사이즈",   	   align : "left",   width: 100},
		          	{key: "prdtLen",        label: "길이",    	   align : "left",   width: 60},
		          	{key: "prdtLenEdit",    label: "길이변경",    	   align : "left",   width: 70, formatter: "money", editor: {type:"text"}, styleClass:"grid-cell-blue"},
		            {key: "impNm",          label: "구분",      	   align : "center", width : 60},
		            {key: "stockQty",       label: "현 재고 수량",		align : "right",  width : 100, formatter: "money"},
		            {key: "stockWt",        label: "현 재고 중량(KG)", align : "right",  width : 100, formatter: "money"},
		            {key: "moveQty",        label: "이동 수량",  		align : "right",  width : 120, formatter: "money", editor: {type:"text"}, styleClass:"grid-cell-blue"},
		            {key: "moveWt",         label: "이동 중량(KG)",  align : "right",  width : 120, formatter: "money"},
    		        {key: "prdtCnvrsnWt",   label: "변환중량",       align : "right",  width : 120, formatter: "money",       hidden:true},
		            {key: "coCd",           label: "재고단가",       hidden:true},
		            {key: "stockUpr",       label: "재고단가",       hidden:true},
		            {key: "stdUpr",         label: "기준단가",       hidden:true},
		            {key: "pchsUpr",        label: "최종매입단가",    hidden:true},
		            {key: "sellUpr",        label: "최종매출단가",    hidden:true},
		            {key: "etcField1",      label: "여분필드(고정)",  hidden:true},
		            {key: "etcField2",      label: "여분필드(숫자)",  hidden:true},
		            {key: "etcField3",      label: "여분필드(가변)",  hidden:true},
		            {key: "stockAmt",       label: "단가",          hidden:true},
		            {key: "proprtStockQty", label: "적정재고수량(KG)", hidden:true},
		            {key: "stockChgCd",     label: "재고변동사유",     hidden:true},
		            {key: "prjctCd",        label: "프로젝트",        hidden:true},
		            {key: "makrNm",         label: "제조사",	       align : "center", width : 80, hidden:true}
		        ],
		        footSum: [
			    	[
			    		{label: "총계", colspan:13, align:"center"},
			    		{key:"moveQty", collector: "sum", formatter:"money", align: "right"},
			    		{key:"moveWt", collector: "sum", formatter:"money", align: "right"},
			    	]
			    ],
		    });
			return this;
		},
		setData: function(_pageNo) {
			searchGrid = this.target;
			 var formData = {
				"coCd"     : $("#searchDtlOutCoCd").val(),
				"whCd"     : $("#searchDtlOutWhCd").val(),
				"clntNm"   : $("#searchDtlClntNm").val(),
				"ownerCd"  : $("#searchDtlOwnerCd").val(),
				"typCd"    : $("#searchDtlTypCd").val(),
			//	"makrCd" : $("#searchDtlMakr").val(),			
				"prjctCd"  : $("#arViewDiv #prjctCd_S").val(),
				"prjctNm"  : $("#arViewDiv #prjctNm_S").val(),
				"impYn"    : $("#searchDtlImpYn").val(),
				"prdtNm"   : $("#searchDtlPrdtNm").val(),
				"pageNo"   : _pageNo + 1,
				"recordCnt": 99999999
			} 
			
			postAjax("/user/sm/sm02/selectStockMoveStatMngmDtlList", formData, null, function(data){
				var list = data.smsmDtlList;
				searchGrid.setData({
					list : list,
					page : {
						/* currentPage : _pageNo,
						pageSize : data.paginationInfo.pageSize,
						totalElements : data.paginationInfo.totalRecordCount,
						totalPages : data.paginationInfo.totalPageCount */
					}
				});
			}); 
		} 
	} 
	
	//화면로드시
	$(document).ready(function() {
		setCommonSelect($(".popup_area select[data-kind]"));
		$("#searchDtlOutCoCd").val(jwt.coCd);
		$("#clntCd").val($('#searchDtlOutCoCd option:selected').data("etc"));
		$("#clntNm").val($('#searchDtlOutCoCd option:selected').text());
		//창고, 판매법인 초기값 설정
		setByCoCd(jwt.coCd);
		
	    //setDtlSelectCombo();
	    gridView1.initView().setData(0);
	    $("#sTransDt").val(dateToStr(new Date()));
	    $('#sTransDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		});
	    
	    

// 재고이동은 유통 <->가공간에만 발생함.
		$("#searchDtlTypCd option[value='SELLTYPE3']").remove();
		$("#searchDtlTypCd option[value='SELLTYPE4']").remove();
		$("#searchDtlType option[value='SELLTYPE3']").remove();
		$("#searchDtlType option[value='SELLTYPE4']").remove();
		
		findWhType(); // 기본 창고 유형  Set
		authChk("SM0201M01");
	    
	})	

		
	//초기화 함수
	function searchInit(){
		$(".row select").val("");
		$(".row input[type='hidden']").val("");
		$(".row input[type='text']").val("");

		setCommonSelect($(".popup_area select[data-kind]"));
		$("#searchDtlOutCoCd").val(jwt.coCd);
		$("#clntCd").val($('#searchDtlOutCoCd option:selected').data("etc"));
		$("#clntNm").val($('#searchDtlOutCoCd option:selected').text());
		//창고 초기값 설정
		setByCoCd(jwt.coCd);
		
	    //setDtlSelectCombo();
	    gridView1.initView().setData(0);
	    $("#sTransDt").val(dateToStr(new Date()));
	    $('#sTransDt').datepicker({
			format : "yyyy-mm-dd",
			language : "ko",
			autoclose : true
		});  

// 재고이동은 유통 <->가공간에만 발생함.
		$("#searchDtlTypCd option[value='SELLTYPE3']").remove();
		$("#searchDtlTypCd option[value='SELLTYPE4']").remove();
		$("#searchDtlType option[value='SELLTYPE3']").remove();
		$("#searchDtlType option[value='SELLTYPE4']").remove();
		
		findWhType(); // 기본 창고 유형  Set
		
// 		$("#searchDtlOutCoCd option:eq(0)").prop("selected",true); 
// 		$("#searchDtlOutWhCd option:eq(0)").prop("selected",true);
// 		$("#searchDtlClntCd").val('');
// 		$("#searchDtlOwnerCd option:eq(0)").prop("selected",true);
// 		$("#searchDtlTypCd option:eq(0)").prop("selected",true);
// 		$("#searchPrjctCd option:eq(0)").prop("selected",true);
// 		$("#arViewDiv #prjctCd_S option:eq(0)").prop("selected",true);
// 		$("#arViewDiv #prjctNm_S").val("");
		
// 	//	$("#searchDtlMakr option:eq(0)").prop("selected",true);
// 		$("#searchDtlImpYn option:eq(0)").prop("selected",true);
// 		$("#searchDtlPrdtCd").val('');
	}

	
	
	//공통코드 조회
	/* function setDtlSelectCombo(){  
		var paramObj = {
			"userId" : jwt.userId,
			"wh" 		: "WH",
			"co" 		: "CO",
			"owner" 	: "OWNER",
			"makr"		: "MAKR",
			"selltype"  : "SELLTYPE",
			"prdtimp"	: "YN"
		};
		
		postAjax("/user/sm/sm02/selectDtlCmnCodeList", paramObj, null,  function(data){
			var whDtlHtml = '<option value="" selected>전체선택</option>';
			var coDtlHtml = '<option value="" selected>전체선택</option>';
			var makrDtlHtml = '<option value="" selected>전체선택</option>';
			var ownerDtlHtml = '<option value="" selected>전체선택</option>';
			var selltypeDtlHtml = '<option value="" selected>전체선택</option>';
			var ynDtlHtml = '<option value="" selected>전체선택</option>';
			var cmnDtlCodeInfo = data.cmnDtlCodeInfo;
			$.each(cmnDtlCodeInfo, function(index, item){
				if(item.codeKind == 'WH'){
					whDtlHtml += '<option value='+item.codeId+'>';
					whDtlHtml += item.codeNm;
					whDtlHtml += '</option>';
				}else if(item.codeKind == 'CO'){
					coDtlHtml += '<option value='+item.codeId+'>';
					coDtlHtml += item.codeNm;
					coDtlHtml += '</option>';
				}else if(item.codeKind == 'MAKR'){
					makrDtlHtml += '<option value='+item.codeId+'>';
					makrDtlHtml += item.codeNm;
					makrDtlHtml += '</option>';
				}else if(item.codeKind == 'OWNER'){
					ownerDtlHtml += '<option value='+item.codeId+'>';
					ownerDtlHtml += item.codeNm;
					ownerDtlHtml += '</option>';
				}else if(item.codeKind == 'SELLTYPE'){
					selltypeDtlHtml += '<option value='+item.codeId+'>';
					selltypeDtlHtml += item.codeNm;
					selltypeDtlHtml += '</option>';
				}else if(item.codeKind == 'YN'){
					ynDtlHtml += '<option value='+item.codeId+'>';
					ynDtlHtml += item.codeNm;
					ynDtlHtml += '</option>';
				}
				
				//상단검색조건
				document.getElementById("searchDtlOutCoCd").innerHTML = coDtlHtml;
				document.getElementById("searchDtlOutWhCd").innerHTML = whDtlHtml;
				document.getElementById("searchDtlMakr").innerHTML = makrDtlHtml;
				document.getElementById("searchDtlOwnerCd").innerHTML = ownerDtlHtml;
				document.getElementById("searchDtlTypCd").innerHTML = selltypeDtlHtml;
				document.getElementById("searchDtlImpYn").innerHTML = ynDtlHtml;
				
				//하단검색조건
				document.getElementById("searchDtlCoCd").innerHTML = coDtlHtml;
				document.getElementById("searchDtlWhCd").innerHTML = whDtlHtml;
			});
		});
	} */
	
	function insertUpdateMove(type){
		var modifiedArr = searchGrid.getList("modified");
		//총 이동중량 > 운반비 총중량 자동 입력
		var moveWt = 0;
		$.each(modifiedArr, function(idx, elem) {
			moveWt += Number(elem.moveWt);
		});
		
		if(modifiedArr.length < 1 || moveWt == 0){
			alert('재고 이동수량을 입력해주세요.');
			return;
		}
		
		if(inputValidation($('input[required]'))) {		
			//재고이동 실행 체크			
			if(!confirm("재고이동 하시겠습니까?")){
				return;
			}
			var formData = makeFormData();
			// 공장에서는 재고관리시 길이는 관리불가임으로 공통으로 8m를 입력한다. 나머지(하치장, 외주)는 실제 길이 관리한다.
			var mngPrdtLen = ''; 
			if($('#sWhType').val() == "WHDIV01") {mngPrdtLen = 8;}
			formData.mngPrdtLen = mngPrdtLen;
			
			//운반비 팝업 정보 set
			var paramObj = {
				coCd : $('#coCd_S').val(),
				actionType : type,
				moveWt : moveWt
			}
			//재고이동전 운반비 등록 여부 체크
			if(confirm("선택한 제품과 총이동 중량을 확인해주세요. \n운반비 등록 후 이동 하시겠습니까? \n'취소'클릭 시 입력된 재고가 이동됩니다.")){
				paramObj.stockInfo = formData;
				openSecondModal("/static/html/user/sm/sm02/SM0201P05.html", 800, 500, "", paramObj);
			}else {
				putAjax("/user/sm/sm02/insertUpdateStockMove", formData, null, function(data){
					alert(data.resultMessage);           
					gridView.setData(0);
					modalStack.close();
				})
			}
		}
	}
	
	function makeFormData() {
		$("#userId").val(jwt.userId);
		
		/* var whCd = $("#searchDtlWhCd").val();
		var sTransDt = $("sTransDt").val();
		var sRmk = $("searchRmk").val(); */
		
		var formData = $("#popForm").serializeObject();
		var formData2 = {
			"sCoCd"     : $("#searchDtlOutCoCd").val(),   // 출고회사가 바뀌면 매입매출고 처리함.
			"sWhCd"     : $("#searchDtlWhCd").val(),
			"sTransDt"  : $("#sTransDt").val(),
			"sRmk"      : $("#searchRmk").val(),	
			"sellType"  : $("#searchDtlType").val(),	
			"sPrjctCd"  : $("#searchPrjctCd").val(),	
			"transSeq"  : $("#transSeq").val(),	
			"transAmt"  : $("#transAmt").val(),
			"realStockYn" : $("#realStockYn").val()	,
			"errCorecYn"  : $("#errCorecYn").val(),
			"impYn"		: $("#impYn").val(),
		}
		// 상세내역 추가
		//formData["detailArr"] = searchGrid.getList();
		formData["detailArr2"] = JSON.stringify(formData2);
		
		var detailArr = searchGrid.getList("modified");
		
		/* formData.append("mWhCd", );
		formData.append("sTransDt", );
		formData.append("sRmk", ); */
		
		formData["detailArr"] = JSON.stringify(detailArr);
		return formData;
	}

	//거래처 검색
	function clntSearch() {
		openSecondModal("/static/html/cmn/modal/clntSearch.html", 600, 420, "거래처 검색", {}, function (grid) {
			var row = grid.target.getList("selected")[0];
			$("#searchDtlClntCd").val(row.clntCd);
			$("#searchDtlClntNm").val(row.clntNm);
		});
	}
	
	// 제품 검색
	function prdtSearch(elem) {
		$targetRow = $(elem).closest('tr[name="tableCd"]');
		// selpchCd - SELPCH2: 매출
		var paramObj = {
			"coCd": $("#searchDtlOutCoCd").val(),
			"selpchCd": "SELPCH2",
			"impYn": "N", 
			"clntCd" : $("#clntCd").val(),
			"prjctCd" : $("#searchPrjctCd").val(),
			"useYn": "Y"
		};
				
		openSecondModal("/static/html/cmn/modal/prdtSearch.html", 800, 600, "제품 검색", paramObj, function (grid) {
			var row = grid.target.getList("selected")[0];
			$targetRow.find('input[name="searchDtlPrdtCd"]').val(row.prdtCd);
			$targetRow.find('input[name="searchDtlPrdtNm"]').val(row.prdtNm);
		});
	}
	
	// 현장 검색
	function openSecondPrjctSearch(type) {
		var paramObj = {
			"coCd"   : $("#searchDtlOutCoCd").val(), 
			"clntCd" : "",
			"clntNm" : "",
			"prjctNm": ""
		}
		
		openSecondModal("/static/html/cmn/modal/prjctSearch.html", 600, 450, "프로젝트 검색", paramObj, function (tree){
			var row = tree.target.getList("selected")[0];
			if(type == "E") {
				$("#searchPrjctCd").val(row.prjctCd);
				$("#searchPrjctNm").val(row.prjctNm);
			} else {
				$("#arViewDiv #prjctCd_S").val(row.prjctCd);
				$("#arViewDiv #prjctNm_S").val(row.prjctNm);
			}
		});
	}
	
	// 창고 유형  codeRprc
	function findWhType(){
		
		$('#sWhType').val($('#searchDtlWhCd option:selected').data("rprc"));
	//	$('#sWhType').val("WHDIV01");
	}
	
	// 창고 set
	function setByCoCd(value){
		//출고고지 창고 법인별 설정
		$('#searchDtlOutWhCd').data("desc", value);
		$('#searchDtlOutWhCd').empty();
		setCommonSelect($('#searchDtlOutWhCd'));
		//임고지 창고법인별 설정
		$('#searchDtlWhCd').data("desc", value);
		$('#searchDtlWhCd').empty();
		setCommonSelect($('#searchDtlWhCd'));	
        //회사 변경
		$("#clntCd").val($('#searchDtlOutCoCd option:selected').data("etc"));
		$("#clntNm").val($('#searchDtlOutCoCd option:selected').text());
		
	}
	
	function clickChkBox() {
		var selectedRows = gridView1.target.getList("selected");
		if(selectedRows.length > 0){
			moveWtAll = 0;
			for(var i=0;i<selectedRows.length;i++){
				moveWtAll += Number(selectedRows[i].moveWt);
			}
			$("#moveWtAll").val(addCommaStr(moveWtAll));
		}else {
			$("#moveWtAll").val(0);
		}
	}
</script>