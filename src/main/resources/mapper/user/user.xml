<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dksys.biz.user.mapper.UserMapper">

	<select id="selectAllUser" resultType="User">
		SELECT * FROM USER
	</select>
	
	<select id="selectUserList" resultType="CamelMap">
		SELECT
			ID,
			NAME,
			EMP_NO,
			EMAIL,
			USE_YN,
			DATE_FORMAT(INSERT_DT, '%Y-%m-%d %H:%i:%s') AS INSERT_DT,
			DATE_FORMAT(UPDATE_DT, '%Y-%m-%d %H:%i:%s') AS UPDATE_DT
		FROM
			USER
		WHERE
			DEPT_ID = #{deptId}
	</select>
	
	<select id="selectUserCount" resultType="int">
		SELECT
			COUNT(*)
		FROM
			USER
		WHERE
			ID = #{userId}
	</select>
	
	<insert id="createUser">
		INSERT INTO USER(
			ID,
			PASSWORD, 
			EMP_NO, 
			NAME, 
			EMAIL, 
			DEPT_ID, 
			ENTER_DT,
			USE_YN, 
			INSERT_DT, 
			UPDATE_DT
		)VALUES(
			#{userId},
			#{password},
			#{empNo},
			#{userNm},
			#{email},
			#{deptId},
			STR_TO_DATE(#{enterDt}, '%Y-%m-%d'),
			#{useYn},
			NOW(),
			NOW()
		)
	</insert>
	
</mapper>