<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dksys.biz.admin.cm.auth.mapper.AuthMapper">

	<select id="selectAuthList" resultType="CamelMap">
		SELECT * FROM CMN_AUTH_INFO
	</select>

	<insert id="insertAuth" parameterType="Map">
		INSERT INTO CMN_AUTH_INFO
		(
			AUTH_ID, AUTH_NM, DESCRIPTION, ROLE_INFO, CREATE_ID, CREATE_DT, UPDATE_ID, UPDATE_DT
		)
		VALUES(
			#{authId}, #{authNm}, #{description}, NULL, #{userId}, SYSDATE(), NULL, NULL
		);		
	</insert>

	<delete id="deleteAuth" parameterType="Map">
		DELETE FROM CMN_AUTH_INFO
		WHERE AUTH_ID = #{authId}
	</delete>

	<update id="updateAuth" parameterType="Map">
		UPDATE CMN_AUTH_INFO
		SET 
			AUTH_ID = #{authId},
			AUTH_NM = #{authNm},
			DESCRIPTION = #{description},
			UPDATE_ID = #{userId}, 
			UPDATE_DT = SYSDATE()
		WHERE AUTH_ID = #{authId}
	</update>

	<update id="updateAuthRole" parameterType="Map">
		UPDATE CMN_AUTH_INFO
		SET 
			AUTH_ROLE = #{authRole}
		WHERE AUTH_ID = #{authId}
	</update>

	<select id="selectRoleFromAuth" parameterType="ArrayList" resultType="String">
		SELECT AUTH_ROLE FROM CMN_AUTH_INFO 
		WHERE
			AUTH_ID IN
			<foreach collection="authArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectMenuFromRole" parameterType="ArrayList" resultType="String">
		SELECT ROLE_MENU FROM CMN_ROLE_INFO 
		WHERE
			ROLE_ID IN
			<foreach collection="roleArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectMenuAuth" parameterType="ArrayList" resultType="CamelMap">
		SELECT * FROM CMN_MENU_INFO 
		WHERE
			MENU_ID IN
			<foreach collection="menuArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectParentMenuAuth" parameterType="String" resultType="CamelMap">
		SELECT * FROM CMN_MENU_INFO 
		WHERE
			UP_MENU_ID = #{upMenuId}
	</select>
	 
</mapper>