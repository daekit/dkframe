<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dksys.biz.admin.cm.cm01.mapper.CM01Mapper">

	<select id="selectAuthList" resultType="CamelMap">
		SELECT * FROM TB_CM01M01
	</select>

	<insert id="insertAuth" parameterType="Map">
		INSERT INTO TB_CM01M01
		(
			AUTH_ID, AUTH_NM, EXPL, AUTH_ROLE, INSERT_ID, INSERT_DT, UPDATE_ID, UPDATE_DT
		)
		VALUES(
			#{authId}, #{authNm}, #{expl}, NULL, #{userId}, SYSDATE, NULL, NULL
		)
	</insert>

	<delete id="deleteAuth" parameterType="Map">
		DELETE FROM TB_CM01M01
		WHERE AUTH_ID = #{authId}
	</delete>

	<update id="updateAuth" parameterType="Map">
		UPDATE TB_CM01M01
		SET 
			AUTH_ID = #{authId},
			AUTH_NM = #{authNm},
			EXPL = #{expl},
			UPDATE_ID = #{userId}, 
			UPDATE_DT = SYSDATE
		WHERE AUTH_ID = #{authId}
	</update>

	<update id="updateAuthRole" parameterType="Map">
		UPDATE TB_CM01M01
		SET 
			AUTH_ROLE = #{authRole}
		WHERE AUTH_ID = #{authId}
	</update>

	<select id="selectRoleFromAuth" parameterType="ArrayList" resultType="String">
		SELECT AUTH_ROLE FROM TB_CM01M01 
		WHERE
			AUTH_ID IN
			<foreach collection="authArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectMenuFromRole" parameterType="ArrayList" resultType="String">
		SELECT ROLE_MENU FROM TB_CM02M01 
		WHERE
			ROLE_ID IN
			<foreach collection="roleArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectMenuAuth" parameterType="ArrayList" resultType="CamelMap">
		SELECT * FROM TB_CM03M01 
		WHERE
			MENU_ID IN
			<foreach collection="menuArray" item="item" index="index" separator="," open="(" close=")">
    			 #{item}
			</foreach>
	</select>

	<select id="selectParentMenuAuth" parameterType="String" resultType="CamelMap">
		SELECT * FROM TB_CM03M01 
		WHERE
			UP_MENU_ID = #{upMenuId}
	</select>
	 
</mapper>